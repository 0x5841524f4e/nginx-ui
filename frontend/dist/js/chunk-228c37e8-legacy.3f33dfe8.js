(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-228c37e8","chunk-56341220"],{"0ba1":function(t,e,a){"use strict";a("bcf9")},"11c6":function(t,e,a){"use strict";a("5e9d")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},1511:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("std-curd",{attrs:{columns:t.columns,api:t.api,disable_search:!0}})},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"std-curd"},[a("a-card",{attrs:{title:t.title}},[t.disable_add?t._e():a("a",{attrs:{slot:"extra"},on:{click:t.add},slot:"extra"},[t._v("添加")]),a("std-table",t._b({key:t.update,ref:"table",on:{clickEdit:t.edit,selected:t.onSelect},scopedSlots:t._u([{key:"actions",fn:function(e){return[t._t("actions",null,{actions:e.record})]}}],null,!0)},"std-table",this.$props,!1))],1),a("a-modal",{staticClass:"std-curd-edit-modal",attrs:{mask:!1,title:t.data.id?"编辑 ID: "+t.data.id:"添加",visible:t.visible,"cancel-text":"关闭","ok-text":"保存",width:600,destroyOnClose:""},on:{cancel:function(e){t.visible=!1,t.error={}},ok:t.ok}},[a("std-data-entry",{ref:"std_data_entry",attrs:{"data-list":t.editableColumns(),"data-source":t.data,error:t.error}},[a("div",{attrs:{slot:"supplement"},slot:"supplement"},[t._t("supplement")],2),a("div",{attrs:{slot:"action"},slot:"action"},[t._t("action")],2)])],1),t.batch_columns.length?a("footer-tool-bar",[a("a-space",[t._v(" 当前已选中"+t._s(t.selected.length)+"条数据 "),a("a-button",{attrs:{disabled:!t.selected.length},on:{click:function(e){t.selected=[],t.update++}}},[t._v("清空选中 ")]),a("a-button",{attrs:{type:"primary",disabled:!t.selected.length,ghost:""},on:{click:function(e){t.visible_batch_edit=!0}}},[t._v("批量修改 ")])],1)],1):t._e(),a("a-modal",{attrs:{mask:!1,title:"批量修改",visible:t.visible_batch_edit,"cancel-text":"取消","ok-text":"保存"},on:{cancel:function(e){t.visible_batch_edit=!1},ok:t.okBatchEdit}},[t._v(" 留空则不修改 "),a("std-data-entry",{attrs:{"data-list":t.batch_columns,"data-source":t.data}})],1)],1)},i=[],o=a("1da1"),c=(a("96cf"),a("4de4"),a("d3a9")),d=a("cb07"),l=a("9c70"),u={name:"StdCurd",components:{StdTable:c["default"],StdDataEntry:d["a"],FooterToolBar:l["a"]},props:{api:Object,columns:Array,title:{type:String,default:"列表"},data_key:{type:String,default:"data"},disable_search:{type:Boolean,default:!1},disable_add:{type:Boolean,default:!1},soft_delete:{type:Boolean,default:!1},edit_text:String,deletable:{type:Boolean,default:!0},get_params:{type:Object,default:function(){return{}}},editable:{type:Boolean,default:!0}},data:function(){return{visible:!1,visible_batch_edit:!1,data:{id:null},error:{},params:{},selected:[],batch_columns:this.batchColumns(),update:0}},methods:{onSelect:function(t){this.selected=t},batchColumns:function(){return this.columns.filter((function(t){return t.batch&&t.edit&&"upload"!==t.edit.type&&"transfer"!==t.edit.type}))},okBatchEdit:function(){var t=this;this.api.batchSave(this.selected,this.data).then((function(){t.$message.success("批量修改成功"),t.$refs.table.get_list()})).catch((function(e){t.$message.error(e.message)}))},editableColumns:function(){return this.columns.filter((function(t){return t.edit}))},uploadColumns:function(){return this.columns.filter((function(t){return t.edit&&"upload"===t.edit.type}))},add:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.data={id:null},t.visible=!0;case 2:case"end":return e.stop()}}),e)})))()},do_upload:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.uploadColumns();case 2:a=e.sent,n=0;case 4:if(!(n<a.length)){e.next=13;break}if(r=t.$refs.std_data_entry.$refs,s=r["std_upload_"+a[n].dataIndex][0],!s){e.next=10;break}return e.next=10,s.upload();case 10:n++,e.next=4;break;case 13:case"end":return e.stop()}}),e)})))()},ok:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.error={},!t.data.id){e.next=7;break}return e.next=4,t.do_upload();case 4:t.api.save(t.data.id?t.data.id:null,t.data).then((function(e){t.$message.success("保存成功"),t.data=Object.assign(t.data,e),t.$refs.table.get_list()})).catch((function(e){t.$message.error(e.message?e.message:"保存失败",5),t.error=e.errors})),e.next=8;break;case 7:t.api.save(t.data.id?t.data.id:null,t.data).then((function(e){t.$message.success("保存成功"),t.data=t.extend(t.data,e),t.$nextTick().then((function(){t.do_upload()})),t.$refs.table.get_list()})).catch((function(e){t.$message.error(e.message?e.message:"保存失败",5),t.error=e.errors}));case 8:case"end":return e.stop()}}),e)})))()},edit:function(t){var e=this;this.api.get(t).then((function(t){e.data=t,e.visible=!0})).catch((function(t){console.log(t),e.$message.error("系统错误")}))}}},p=u,f=a("2877"),h=Object(f["a"])(p,s,i,!1,null,"193f1d78",null),g=h.exports,m=[{title:"用户名",dataIndex:"name",sorter:!0,pithy:!0,edit:{type:"input"}},{title:"密码",dataIndex:"password",sorter:!0,pithy:!0,edit:{type:"input",placeholder:"留空不修改"},display:!1},{title:"创建时间",dataIndex:"created_at",datetime:!0,sorter:!0,pithy:!0},{title:"修改时间",dataIndex:"updated_at",datetime:!0,sorter:!0,pithy:!0},{title:"操作",dataIndex:"action"}],b={name:"User",components:{StdCurd:g},data:function(){return{api:this.$api.user,columns:m}},methods:{}},_=b,v=Object(f["a"])(_,n,r,!1,null,"fa0be84c",null);e["default"]=v.exports},"1f8f":function(t,e,a){var n=a("9a5e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=a("499e").default;r("11072822",n,!0,{sourceMap:!1,shadowMode:!1})},3098:function(t,e,a){"use strict";a("1f8f")},"3c77":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".pagination[data-v-d1535536]{padding:10px 0 0 0;float:right}@media (max-width:450px){.pagination[data-v-d1535536]{float:unset;text-align:center}}",""]),t.exports=e},"3d07":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'.ant-pro-footer-toolbar[data-v-89d7d506]{position:fixed;width:100%;bottom:0;right:0;height:56px;line-height:56px;box-shadow:0 -1px 2px rgba(0,0,0,.03);background:hsla(0,0%,100%,.5490196078431373);border-top:1px solid #e8e8e8;padding:0 24px;z-index:9}@media (prefers-color-scheme:dark){.ant-pro-footer-toolbar[data-v-89d7d506]{background:rgba(24,24,24,.62);border-top:unset}}.ant-pro-footer-toolbar[data-v-89d7d506]:after{content:"";display:block;clear:both}',""]),t.exports=e},5058:function(t,e,a){var n=a("3c77");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=a("499e").default;r("1ab945c6",n,!0,{sourceMap:!1,shadowMode:!1})},"5e9d":function(t,e,a){var n=a("3d07");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=a("499e").default;r("95f33600",n,!0,{sourceMap:!1,shadowMode:!1})},6588:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"@media (max-width:450px){.ant-pagination-total-text{display:block}}",""]),t.exports=e},"72bd":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".ant-table-scroll .ant-table-body{overflow-x:auto!important}",""]),t.exports=e},"841c":function(t,e,a){"use strict";var n=a("d784"),r=a("825a"),s=a("1d80"),i=a("129f"),o=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=s(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var s=r(t),c=String(this),d=s.lastIndex;i(d,0)||(s.lastIndex=0);var l=o(s,c);return i(s.lastIndex,d)||(s.lastIndex=d),null===l?-1:l.index}]}))},"9a5e":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".ant-form[data-v-420d5521]{margin:10px 0 20px 0}.ant-slider[data-v-420d5521]{min-width:90px}",""]),t.exports=e},"9c70":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ant-pro-footer-toolbar"},[a("div",{staticStyle:{float:"left"}},[t._t("extra",[t._v(t._s(t.extra))])],2),a("div",{staticStyle:{float:"right"}},[t._t("default")],2)])},r=[],s={name:"FooterToolBar",props:{prefixCls:{type:String,default:"ant-pro-footer-toolbar"},extra:{type:[String,Object],default:""}}},i=s,o=(a("11c6"),a("2877")),c=Object(o["a"])(i,n,r,!1,null,"89d7d506",null);e["a"]=c.exports},b64b:function(t,e,a){var n=a("23e7"),r=a("7b0b"),s=a("df75"),i=a("d039"),o=i((function(){s(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(t){return s(r(t))}})},bcf9:function(t,e,a){var n=a("6588");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=a("499e").default;r("9a068606",n,!0,{sourceMap:!1,shadowMode:!1})},d3a9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"std-table"},[t.disable_search?t._e():a("std-data-entry",{attrs:{"data-list":t.searchColumns,layout:"inline"},model:{value:t.params,callback:function(e){t.params=e},expression:"params"}},[a("div",{attrs:{slot:"action"},slot:"action"},[a("a-form-item",{attrs:{"wrapper-col":{span:8}}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push({query:Object.assign({},t.params)}).catch((function(){}))}}},[t._v("查询 ")])],1),a("a-form-item",{attrs:{"wrapper-col":{span:8}}},[a("a-button",{on:{click:t.reset_search}},[t._v("重置")])],1)],1)]),t.soft_delete?a("div",{staticStyle:{"text-align":"right"}},[t.params["trashed"]?a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.params["trashed"]=!1,t.get_list()}}},[t._v("返回")]):a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.params["trashed"]=!0,t.get_list()}}},[t._v("回收站")])]):t._e(),a("a-table",{attrs:{columns:t.pithyColumns,customRow:t.row,"data-source":t.data_source,loading:t.loading,pagination:!1,"row-key":t.rowKey,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange,onSelect:t.onSelect,type:t.selectionType},scroll:{x:t.scrollX}},on:{change:t.stdChange},scopedSlots:t._u([t._l(t.pithyColumns,(function(e){return{key:e.scopedSlots.customRender,fn:function(n,r){return[e.badge?a("div",{key:e.dataIndex},[a("a-badge",!0===n||n>0?{attrs:{status:"success"}}:{attrs:{status:"error"}}),t._v(" "+t._s(e.mask?e.mask[n]:n)+" ")],1):e.datetime?a("span",{key:e.dataIndex},[t._v(t._s(n?t.moment(n).format("yyyy-MM-DD HH:mm:ss"):"无"))]):e.date?a("span",{key:e.dataIndex},[t._v(t._s(n?t.moment(n).format("yyyy-MM-DD"):"无"))]):e.click?a("div",{key:e.dataIndex},[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.handleClick(r[e.click.index?e.click.index:e.dataIndex],e.click.index?e.click.index:e.dataIndex,e.click.method,e.click.path)}}},[t._v(" "+t._s(null!=n?n:e.default)+" ")])]):a("span",{key:e.dataIndex},[t._v(t._s(null!=n?e.mask?e.mask[n]:n:e.default))])]}}})),{key:"action",fn:function(e,n){return t.pithy?t._e():a("div",{staticClass:"std_action"},[t.editable?a("a",{on:{click:function(e){return t.$emit("clickEdit",n[t.rowKey],n)}}},[t.edit_text?[t._v(t._s(t.edit_text))]:[t._v("编辑")]],2):t._e(),t._t("actions",null,{record:n}),t.deletable?[a("a-divider",{attrs:{type:"vertical"}}),t.soft_delete&&t.params.trashed?a("a-popconfirm",{attrs:{cancelText:"再想想",okText:"是的",title:"你确定要反删除?"},on:{confirm:function(e){return t.restore(n.id)}}},[a("a",{attrs:{href:"javascript:;"}},[t._v("反删除")])]):a("a-popconfirm",{attrs:{cancelText:"再想想",okText:"是的",title:"你确定要删除?"},on:{confirm:function(e){return t.destroy(n.id)}}},[a("a",{attrs:{href:"javascript:;"}},[t._v("删除")])])]:t._e()],2)}}],null,!0)}),a("std-pagination",{attrs:{pagination:t.pagination},on:{changePage:t.get_list}})],1)},r=[],s=a("1da1"),i=a("53ca");a("b64b"),a("a4d3"),a("4de4"),a("e439"),a("159b"),a("dbb4");function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}a("96cf"),a("a9e3"),a("841c"),a("ac1f");var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 0!==Object.keys(t.pagination).length?a("div",[a("a-pagination",{staticClass:"pagination",attrs:{current:t.pagination.current_page,hideOnSinglePage:!0,pageSize:t.pagination.per_page,size:t.size,total:t.pagination.total,"show-total":function(t,e){return"当前显示"+e[0]+"-"+e[1]+"条数据，共"+t+"条数据"}},on:{change:t.changePage}}),a("div",{staticClass:"clear"})],1):t._e()},u=[],p={name:"StdPagination",props:{pagination:Object,size:{default:""}},methods:{changePage:function(t){return this.$emit("changePage",t)}}},f=p,h=(a("0ba1"),a("ed6e"),a("2877")),g=Object(h["a"])(f,l,u,!1,null,"d1535536",null),m=g.exports,b=a("c1df"),_=a.n(b),v=a("cb07"),y={name:"StdTable",components:{StdDataEntry:v["a"],StdPagination:m},props:{columns:Array,api:Object,data_key:String,selectionType:{type:String,default:"checkbox",validator:function(t){return-1!==["checkbox","radio"].indexOf(t)}},pithy:{type:Boolean,default:!1},disable_search:{type:Boolean,default:!1},soft_delete:{type:Boolean,default:!1},edit_text:String,deletable:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},get_params:{type:Object,default:function(){return{}}},scrollX:{type:[Number,Boolean],default:!0},rowKey:{type:String,default:"id"}},data:function(){return{moment:_.a,data_source:[],loading:!0,pagination:{total:1,per_page:10,current_page:1,total_pages:1},params:d(d({},this.$route.query),this.get_params),selectedRowKeys:[],rowSelection:{},searchColumns:this.get_searchColumns(),pithyColumns:this.get_pithyColumns()}},watch:{$route:function(){this.get_list()}},created:function(){this.get_list()},methods:{get_list:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loading=!0,e&&(this.params["page"]=e),this.api.get_list(this.params).then((function(e){void 0===e[t.data_key]&&void 0!==e.data?t.data_source=e.data:t.data_source=e[t.data_key],void 0!==e.pagination&&(t.pagination=e.pagination),t.loading=!1})).catch((function(e){console.log(e),t.$message.error("系统错误")}))},stdChange:function(t,e,a){var n=this;a&&(this.params["order_by"]=a.field,this.params["sort"]="ascend"===a.order?"asc":"desc",this.$nextTick((function(){n.get_list()})))},destroy:function(t){var e=this;this.api.destroy(t).then((function(){e.get_list(),e.$message.success("删除 ID: "+t+" 成功")})).catch((function(t){console.log(t),t.message?e.$message.error("错误 "+t.message):e.$message.error("系统错误")}))},restore:function(t){var e=this;this.api.restore(t).then((function(){e.get_list(),e.$message.success("反删除 ID: "+t+" 成功")})).catch((function(t){console.log(t),t.message?e.$message.error("错误"+t.message):e.$message.error("系统错误")}))},get_searchColumns:function(){var t=[];return this.columns.forEach((function(e){if(e.search){if(e.edit&&"upload"!==e.edit.type&&"transfer"!==e.edit.type){var a=Object.assign({},e);a.edit=Object.assign({},e.edit),"string"===typeof e.search?a.edit.type=e.search:"object"===Object(i["a"])(e.search)&&(a.edit=e.search),t.push(a)}if(!e.edit){var n=Object.assign({},e);n.edit=Object.assign({},e.edit),"object"===Object(i["a"])(e.search)&&(n.edit=e.search),t.push(n)}}})),t},get_pithyColumns:function(){return this.pithy?this.columns.filter((function(t,e,a){var n=!0===t.pithy&&!1!==t.display;return a[e]["scopedSlots"]={},a[e]["scopedSlots"]["customRender"]="title"!==t.dataIndex?t.dataIndex:"_"+t.dataIndex,n})):this.columns.filter((function(t,e,a){var n=!1!==t.display;return a[e]["scopedSlots"]={},a[e]["scopedSlots"]["customRender"]="title"!==t.dataIndex?t.dataIndex:"_"+t.dataIndex,n}))},checked:function(t){this.params[t.target.value]=t.target.checked},onSelectChange:function(t){this.selectedRowKeys=t,this.$emit("selected",t)},onSelect:function(t){this.$emit("selectedRecord",t)},handleClick:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";"router"===a?this.$router.push(n+"/"+t).then():(this.params[e]=t,this.get_list())},row:function(t){var e=this;return{on:{click:function(){e.$emit("clickRow",t.id)}}}},reset_search:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.params={},e.next=3,t.$router.push({query:{}}).catch((function(){}));case 3:case"end":return e.stop()}}),e)})))()}}},x=y,k=(a("dd99"),a("3098"),Object(h["a"])(x,n,r,!1,null,"420d5521",null));e["default"]=k.exports},dbb4:function(t,e,a){var n=a("23e7"),r=a("83ab"),s=a("56ef"),i=a("fc6a"),o=a("06cf"),c=a("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,a,n=i(t),r=o.f,d=s(n),l={},u=0;while(d.length>u)a=r(n,e=d[u++]),void 0!==a&&c(l,e,a);return l}})},dd99:function(t,e,a){"use strict";a("fe50")},e439:function(t,e,a){var n=a("23e7"),r=a("d039"),s=a("fc6a"),i=a("06cf").f,o=a("83ab"),c=r((function(){i(1)})),d=!o||c;n({target:"Object",stat:!0,forced:d,sham:!o},{getOwnPropertyDescriptor:function(t,e){return i(s(t),e)}})},ed6e:function(t,e,a){"use strict";a("5058")},fe50:function(t,e,a){var n=a("72bd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=a("499e").default;r("2b771d5f",n,!0,{sourceMap:!1,shadowMode:!1})}}]);